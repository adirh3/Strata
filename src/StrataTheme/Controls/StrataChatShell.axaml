<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="using:StrataTheme.Controls">

  <!-- ═══════════════════════════════════════════════════════════
       StrataChatShell
       Minimal chrome: scrollable transcript + docked composer.
       Optional top row for header/presence.
       ═══════════════════════════════════════════════════════════ -->

  <Styles.Resources>
    <ResourceDictionary>
      <ControlTheme x:Key="{x:Type controls:StrataChatShell}" TargetType="controls:StrataChatShell">
        <Setter Property="Template">
          <ControlTemplate>
            <Border Name="PART_Root"
                    Background="Transparent"
                    BorderThickness="0"
                    Padding="0"
                    CornerRadius="12"
                    ClipToBounds="True">

              <DockPanel>

                <Border Name="PART_HeaderChrome"
                        DockPanel.Dock="Top"
                  IsVisible="False"
                  CornerRadius="11,11,0,0"
                        ClipToBounds="True">
                  <StackPanel Spacing="0">
                    <!-- Optional top row (header + presence) -->
                    <Border Name="PART_HeaderContainer"
                            IsVisible="False"
                      Padding="12,10,12,8"
                      CornerRadius="0">

                      <DockPanel Name="PART_HeaderRow" LastChildFill="False">
                        <ContentPresenter Name="PART_HeaderPresenter"
                                          Content="{TemplateBinding Header}"
                                          VerticalAlignment="Center" />

                        <Border Name="PART_PresencePill"
                                IsVisible="False"
                                DockPanel.Dock="Right"
                          HorizontalAlignment="Right"
                                Padding="8,3"
                                CornerRadius="999"
                              Background="{DynamicResource Brush.Surface2}"
                              BorderBrush="{DynamicResource Brush.BorderSubtle}"
                              BorderThickness="1">
                          <StackPanel Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
                            <Border Name="PART_PresenceDot"
                                    Width="6"
                                    Height="6"
                                    CornerRadius="3"
                                    Background="{DynamicResource Brush.SuccessDefault}" />
                            <TextBlock Text="{TemplateBinding PresenceText}"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource Brush.TextSecondary}" />
                          </StackPanel>
                        </Border>
                      </DockPanel>
                    </Border>

                    <Border Name="PART_HeaderSeparator"
                            IsVisible="False"
                            Height="1"
                      Background="{DynamicResource Brush.BorderSubtle}"
                      Opacity="0.8">
                      <Border.Transitions>
                        <Transitions>
                          <BrushTransition Property="Background" Duration="0:0:0.2" />
                          <DoubleTransition Property="Opacity" Duration="0:0:0.16" />
                        </Transitions>
                      </Border.Transitions>
                    </Border>
                  </StackPanel>
                </Border>

                <!-- Composer docked at bottom -->
                <Border DockPanel.Dock="Bottom"
                  Padding="12,8,12,10"
                  CornerRadius="0,0,11,11">
                  <ContentPresenter Content="{TemplateBinding Composer}" />
                </Border>

                <!-- Scrollable transcript fills remaining space -->
                <Border Name="PART_TranscriptHost">
                  <ScrollViewer Name="PART_TranscriptScroll"
                                VerticalScrollBarVisibility="Auto"
                                HorizontalScrollBarVisibility="Disabled">
                    <Border Name="PART_ScrollContent" Padding="16,12,16,12">
                      <ContentPresenter Content="{TemplateBinding Transcript}" />
                    </Border>
                  </ScrollViewer>
                </Border>
              </DockPanel>
            </Border>
          </ControlTemplate>
        </Setter>

        <Style Selector="^:has-header /template/ DockPanel#PART_HeaderRow">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:has-header /template/ Border#PART_HeaderChrome">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:has-header /template/ Border#PART_HeaderContainer">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:has-header /template/ Border#PART_HeaderSeparator">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.BorderSubtle}" />
          <Setter Property="Opacity" Value="0.8" />
        </Style>

        <Style Selector="^:has-presence /template/ Border#PART_HeaderContainer">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:has-presence /template/ Border#PART_HeaderChrome">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:has-presence /template/ Border#PART_HeaderSeparator">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.BorderSubtle}" />
          <Setter Property="Opacity" Value="0.8" />
        </Style>
        <Style Selector="^:has-presence /template/ Border#PART_PresencePill">
          <Setter Property="IsVisible" Value="True" />
        </Style>

        <Style Selector="^:online /template/ Border#PART_PresencePill">
          <Setter Property="Background" Value="{DynamicResource Brush.AccentSubtle}" />
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.AccentSubtleHover}" />
        </Style>
        <Style Selector="^:offline /template/ Border#PART_PresencePill">
          <Setter Property="Background" Value="{DynamicResource Brush.Surface2}" />
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderSubtle}" />
        </Style>

        <Style Selector="^:online /template/ Border#PART_PresenceDot">
          <Setter Property="Background" Value="{DynamicResource Brush.SuccessDefault}" />
        </Style>
        <Style Selector="^:offline /template/ Border#PART_PresenceDot">
          <Setter Property="Background" Value="{DynamicResource Brush.TextTertiary}" />
        </Style>
      </ControlTheme>
    </ResourceDictionary>
  </Styles.Resources>
</Styles>
