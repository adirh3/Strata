<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="using:StrataTheme.Controls">

  <!-- ═══════════════════════════════════════════════════════════
       StrataCanvas
       Rich-content artifact panel for AI chat integration.
       Elegant surface with title bar, toolbar, and content area.
       ═══════════════════════════════════════════════════════════ -->

  <Styles.Resources>
    <ResourceDictionary>

      <ControlTheme x:Key="{x:Type controls:StrataCanvas}" TargetType="controls:StrataCanvas">
        <Setter Property="Focusable" Value="True" />
        <Setter Property="Background" Value="{DynamicResource Brush.Surface0}" />
        <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderSubtle}" />
        <Setter Property="BorderThickness" Value="{DynamicResource Stroke.Thin}" />
        <Setter Property="CornerRadius" Value="12" />
        <Setter Property="ClipToBounds" Value="True" />
        <Setter Property="Template">
          <ControlTemplate>
            <Border Name="PART_Root"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{TemplateBinding CornerRadius}"
                    BoxShadow="0 2 8 0 #10000000"
                    ClipToBounds="True">
              <Border.Transitions>
                <Transitions>
                  <BrushTransition Property="Background" Duration="0:0:0.2" />
                  <BrushTransition Property="BorderBrush" Duration="0:0:0.15" />
                  <BoxShadowsTransition Property="BoxShadow" Duration="0:0:0.2" />
                </Transitions>
              </Border.Transitions>

              <DockPanel>

                <!-- Stratum accent line at top -->
                <Border Name="PART_StratumLine"
                        DockPanel.Dock="Top"
                        Height="2.5"
                        Background="{DynamicResource Brush.AccentGradient}">
                  <Border.Transitions>
                    <Transitions>
                      <BrushTransition Property="Background" Duration="0:0:0.3" />
                    </Transitions>
                  </Border.Transitions>
                </Border>

                <!-- Title bar -->
                <Border Name="PART_TitleBar"
                        DockPanel.Dock="Top"
                        Padding="16,10,12,10"
                        Background="Transparent">
                  <DockPanel LastChildFill="True">

                    <!-- Right side: toolbar + close button -->
                    <StackPanel DockPanel.Dock="Right"
                                Orientation="Horizontal"
                                Spacing="4"
                                VerticalAlignment="Center">
                      <ContentPresenter Name="PART_ToolBarPresenter"
                                        Content="{TemplateBinding ToolBar}"
                                        IsVisible="False" />
                      <Border Name="PART_ToolBarSep"
                              Width="1" Height="16"
                              Margin="4,0"
                              Background="{DynamicResource Brush.BorderSubtle}"
                              IsVisible="False" />
                      <Button Name="PART_CloseButton"
                              Classes="subtle"
                              Padding="6" MinHeight="0" MinWidth="0"
                              CornerRadius="6"
                              ToolTip.Tip="Close">
                        <TextBlock Text="✕"
                                   FontSize="11"
                                   Foreground="{DynamicResource Brush.TextTertiary}" />
                      </Button>
                    </StackPanel>

                    <!-- Left side: icon + title + subtitle -->
                    <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                      <ContentPresenter Name="PART_IconPresenter"
                                        Content="{TemplateBinding Icon}"
                                        IsVisible="False"
                                        VerticalAlignment="Center" />
                      <StackPanel Spacing="1" VerticalAlignment="Center">
                        <TextBlock Name="PART_Title"
                                   Text="{TemplateBinding Title}"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource Brush.TextPrimary}" />
                        <TextBlock Name="PART_Subtitle"
                                   Text="{TemplateBinding Subtitle}"
                                   FontSize="11"
                                   Foreground="{DynamicResource Brush.TextTertiary}"
                                   IsVisible="False" />
                      </StackPanel>
                    </StackPanel>

                  </DockPanel>
                </Border>

                <!-- Title bar separator -->
                <Border DockPanel.Dock="Top"
                        Height="1"
                        Background="{DynamicResource Brush.BorderSubtle}"
                        Opacity="0.6" />

                <!-- Footer (docked at bottom before content fills remaining space) -->
                <Border Name="PART_FooterSeparator"
                        DockPanel.Dock="Bottom"
                        Height="1"
                        Background="{DynamicResource Brush.BorderSubtle}"
                        Opacity="0.6"
                        IsVisible="False" />
                <Border Name="PART_Footer"
                        DockPanel.Dock="Bottom"
                        Padding="16,8,16,10"
                        IsVisible="False">
                  <ContentPresenter Content="{TemplateBinding Footer}" />
                </Border>

                <!-- Main content area -->
                <Border Name="PART_ContentHost"
                        Background="Transparent"
                        Padding="0">
                  <ScrollViewer VerticalScrollBarVisibility="Auto"
                                HorizontalScrollBarVisibility="Disabled">
                    <ContentPresenter Name="PART_ContentPresenter"
                                      Content="{TemplateBinding Content}"
                                      Margin="16,12,16,12" />
                  </ScrollViewer>
                </Border>

              </DockPanel>
            </Border>
          </ControlTemplate>
        </Setter>

        <!-- ── Visibility: open / closed ── -->
        <Style Selector="^:closed">
          <Setter Property="IsVisible" Value="False" />
        </Style>

        <!-- ── Subtitle visibility ── -->
        <Style Selector="^:has-subtitle /template/ TextBlock#PART_Subtitle">
          <Setter Property="IsVisible" Value="True" />
        </Style>

        <!-- ── Icon visibility ── -->
        <Style Selector="^:has-icon /template/ ContentPresenter#PART_IconPresenter">
          <Setter Property="IsVisible" Value="True" />
        </Style>

        <!-- ── Toolbar visibility ── -->
        <Style Selector="^:has-toolbar /template/ ContentPresenter#PART_ToolBarPresenter">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:has-toolbar /template/ Border#PART_ToolBarSep">
          <Setter Property="IsVisible" Value="True" />
        </Style>

        <!-- ── Footer visibility ── -->
        <Style Selector="^:has-footer /template/ Border#PART_Footer">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:has-footer /template/ Border#PART_FooterSeparator">
          <Setter Property="IsVisible" Value="True" />
        </Style>

        <!-- ── Close button hidden when ShowCloseButton=False ── -->
        <Style Selector="^[ShowCloseButton=False] /template/ Button#PART_CloseButton">
          <Setter Property="IsVisible" Value="False" />
        </Style>
        <Style Selector="^[ShowCloseButton=False] /template/ Border#PART_ToolBarSep">
          <Setter Property="IsVisible" Value="False" />
        </Style>

        <!-- ── Hover ── -->
        <Style Selector="^:pointerover /template/ Border#PART_Root">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderDefault}" />
          <Setter Property="BoxShadow" Value="0 4 16 0 #14000000" />
        </Style>

        <!-- ── Focus ── -->
        <Style Selector="^:focus-visible /template/ Border#PART_Root">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.AccentDefault}" />
          <Setter Property="BoxShadow" Value="0 0 0 2 #30818CF8" />
        </Style>

      </ControlTheme>

    </ResourceDictionary>
  </Styles.Resources>
</Styles>
