<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="using:StrataTheme.Controls">
  <Styles.Resources>
    <ResourceDictionary>

      <ControlTheme x:Key="{x:Type controls:StrataCard}" TargetType="controls:StrataCard">
        <Setter Property="Focusable" Value="True" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="Template">
          <ControlTemplate>
            <Panel>
              <!-- Focus ring (outer, Strata pattern) -->
              <Border Name="PART_FocusRing"
                      CornerRadius="10"
                      BorderThickness="2"
                      BorderBrush="Transparent"
                      Margin="-2"
                      IsHitTestVisible="False" />

              <Border Name="PART_Root"
                      Background="{DynamicResource Brush.Surface0}"
                      BorderBrush="{DynamicResource Brush.BorderSubtle}"
                      BorderThickness="1"
                      CornerRadius="8"
                      ClipToBounds="True"
                      Cursor="Hand"
                      RenderTransformOrigin="0.5,0.5"
                      RenderTransform="scale(1)">
                <Border.Transitions>
                  <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.14" />
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.14" />
                    <BoxShadowsTransition Property="BoxShadow" Duration="0:0:0.18" />
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.12" Easing="CubicEaseOut" />
                  </Transitions>
                </Border.Transitions>

                <StackPanel Spacing="0">
                  <!-- Stratum accent line — Strata signature gradient -->
                  <Border Name="PART_Stratum"
                          Height="2"
                          Background="{DynamicResource Brush.AccentGradient}"
                          Opacity="0.6">
                    <Border.Transitions>
                      <Transitions>
                        <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                      </Transitions>
                    </Border.Transitions>
                  </Border>

                  <!-- Clickable header row -->
                  <Border Name="PART_Header"
                          Padding="12,8,10,8"
                          Background="Transparent">
                    <Grid ColumnDefinitions="Auto,8,*,8,Auto">
                      <!-- Status dot -->
                      <Border Name="PART_StatusDot"
                              Width="6" Height="6"
                              CornerRadius="3"
                              VerticalAlignment="Center"
                              Background="{DynamicResource Brush.BorderSubtle}"
                              IsVisible="False">
                        <Border.Transitions>
                          <Transitions>
                            <BrushTransition Property="Background" Duration="0:0:0.2" />
                          </Transitions>
                        </Border.Transitions>
                      </Border>

                      <!-- Header text stack -->
                      <StackPanel Grid.Column="2" Spacing="1" VerticalAlignment="Center">
                        <ContentPresenter Name="PART_HeaderPresenter"
                                          Content="{TemplateBinding Header}"
                                          TextElement.FontSize="12.5"
                                          TextElement.FontWeight="SemiBold" />
                        <TextBlock Name="PART_Subtitle"
                                   Text="{TemplateBinding Subtitle}"
                                   FontSize="11"
                                   Foreground="{DynamicResource Brush.TextTertiary}"
                                   TextTrimming="CharacterEllipsis" />
                      </StackPanel>

                      <!-- Status pill -->
                      <Border Name="PART_StatusPill"
                              Grid.Column="4"
                              Padding="7,2"
                              CornerRadius="999"
                              Background="{DynamicResource Brush.AccentSubtle}"
                              VerticalAlignment="Center"
                              IsVisible="False">
                        <TextBlock Name="PART_StatusLabel"
                                   FontSize="10"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource Brush.AccentDefault}" />
                      </Border>
                    </Grid>
                  </Border>

                  <!-- Summary — compact preview, hidden when expanded -->
                  <Border Name="PART_SummaryHost"
                          Padding="12,0,12,8">
                    <Border.Transitions>
                      <Transitions>
                        <DoubleTransition Property="Opacity" Duration="0:0:0.16" />
                      </Transitions>
                    </Border.Transitions>
                    <ContentPresenter Content="{TemplateBinding Summary}"
                                      TextElement.FontSize="12"
                                      TextElement.Foreground="{DynamicResource Brush.TextSecondary}" />
                  </Border>

                  <!-- Detail — animated reveal -->
                  <Border Name="PART_Detail"
                          ClipToBounds="True"
                          MaxHeight="0"
                          Opacity="0"
                          Padding="12,0,12,10"
                          RenderTransformOrigin="0.5,0"
                          RenderTransform="translateY(-4px) scaleY(0.96)">
                    <Border.Transitions>
                      <Transitions>
                        <DoubleTransition Property="MaxHeight" Duration="0:0:0.26" Easing="CubicEaseOut" />
                        <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                        <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.22" Easing="CubicEaseOut" />
                      </Transitions>
                    </Border.Transitions>
                    <StackPanel Spacing="8">
                      <Border Height="1" Background="{DynamicResource Brush.BorderSubtle}" />
                      <ContentPresenter Content="{TemplateBinding Detail}" />
                      <!-- Footer inside detail area -->
                      <Border Name="PART_FooterHost" IsVisible="False">
                        <StackPanel Spacing="6">
                          <Border Height="1" Background="{DynamicResource Brush.BorderSubtle}" />
                          <ContentPresenter Content="{TemplateBinding Footer}"
                                            TextElement.FontSize="11"
                                            TextElement.Foreground="{DynamicResource Brush.TextTertiary}" />
                        </StackPanel>
                      </Border>
                    </StackPanel>
                  </Border>
                </StackPanel>
              </Border>
            </Panel>
          </ControlTemplate>
        </Setter>

        <!-- ─── Expanded ─── -->
        <Style Selector="^:expanded /template/ Border#PART_Detail">
          <Setter Property="MaxHeight" Value="2000" />
          <Setter Property="Opacity" Value="1" />
          <Setter Property="RenderTransform" Value="translateY(0) scaleY(1)" />
        </Style>
        <Style Selector="^:expanded /template/ Border#PART_Stratum">
          <Setter Property="Opacity" Value="1" />
        </Style>
        <Style Selector="^:expanded /template/ Border#PART_SummaryHost">
          <Setter Property="Opacity" Value="0" />
          <Setter Property="IsVisible" Value="False" />
        </Style>

        <!-- ─── Hover ─── -->
        <Style Selector="^:pointerover /template/ Border#PART_Root">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderDefault}" />
          <Setter Property="Background" Value="{DynamicResource Brush.Surface1}" />
          <Setter Property="BoxShadow" Value="0 2 8 0 #0D000000" />
        </Style>

        <!-- ─── Pressed ─── -->
        <Style Selector="^:pressed /template/ Border#PART_Root">
          <Setter Property="RenderTransform" Value="scale(0.99)" />
          <Setter Property="BoxShadow" Value="0 0 0 0 #00000000" />
        </Style>

        <!-- ─── Focus ─── -->
        <Style Selector="^:focus-visible /template/ Border#PART_FocusRing">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.AccentDefault}" />
        </Style>

        <!-- ─── Footer visible ─── -->
        <Style Selector="^:has-footer /template/ Border#PART_FooterHost">
          <Setter Property="IsVisible" Value="True" />
        </Style>

        <!-- ─── Status dot + pill visible when status set ─── -->
        <Style Selector="^:info /template/ Border#PART_StatusDot">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.AccentDefault}" />
        </Style>
        <Style Selector="^:info /template/ Border#PART_StatusPill">
          <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:info /template/ Border#PART_Stratum">
          <Setter Property="Background" Value="{DynamicResource Brush.AccentDefault}" />
        </Style>

        <Style Selector="^:success /template/ Border#PART_StatusDot">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.SuccessDefault}" />
        </Style>
        <Style Selector="^:success /template/ Border#PART_StatusPill">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.SuccessSubtle}" />
        </Style>
        <Style Selector="^:success /template/ TextBlock#PART_StatusLabel">
          <Setter Property="Foreground" Value="{DynamicResource Brush.SuccessDefault}" />
        </Style>
        <Style Selector="^:success /template/ Border#PART_Stratum">
          <Setter Property="Background" Value="{DynamicResource Brush.SuccessDefault}" />
        </Style>

        <Style Selector="^:warning /template/ Border#PART_StatusDot">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.WarningDefault}" />
        </Style>
        <Style Selector="^:warning /template/ Border#PART_StatusPill">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.WarningSubtle}" />
        </Style>
        <Style Selector="^:warning /template/ TextBlock#PART_StatusLabel">
          <Setter Property="Foreground" Value="{DynamicResource Brush.WarningDefault}" />
        </Style>
        <Style Selector="^:warning /template/ Border#PART_Stratum">
          <Setter Property="Background" Value="{DynamicResource Brush.WarningDefault}" />
        </Style>

        <Style Selector="^:error /template/ Border#PART_StatusDot">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.DangerDefault}" />
        </Style>
        <Style Selector="^:error /template/ Border#PART_StatusPill">
          <Setter Property="IsVisible" Value="True" />
          <Setter Property="Background" Value="{DynamicResource Brush.DangerSubtle}" />
        </Style>
        <Style Selector="^:error /template/ TextBlock#PART_StatusLabel">
          <Setter Property="Foreground" Value="{DynamicResource Brush.DangerDefault}" />
        </Style>
        <Style Selector="^:error /template/ Border#PART_Stratum">
          <Setter Property="Background" Value="{DynamicResource Brush.DangerDefault}" />
        </Style>

      </ControlTheme>

    </ResourceDictionary>
  </Styles.Resources>
</Styles>
