<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="using:StrataTheme.Controls">
  <Styles.Resources>
    <ResourceDictionary>

      <ControlTheme x:Key="{x:Type controls:StrataCard}" TargetType="controls:StrataCard">
        <Setter Property="Focusable" Value="True" />
        <Setter Property="Background" Value="{DynamicResource Brush.Surface1}" />
        <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderSubtle}" />
        <Setter Property="BorderThickness" Value="{DynamicResource Stroke.Thin}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Base}" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="ClipToBounds" Value="True" />
        <Setter Property="Template">
          <ControlTemplate>
            <Border Name="PART_RootBorder"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{TemplateBinding CornerRadius}"
                    ClipToBounds="True">
              <Border.Transitions>
                <Transitions>
                  <BrushTransition Property="Background" Duration="0:0:0.2" />
                  <BrushTransition Property="BorderBrush" Duration="0:0:0.15" />
                </Transitions>
              </Border.Transitions>
              <DockPanel>
                <!-- Stratum accent line -->
                <Border Name="PART_StratumLine"
                        DockPanel.Dock="Left"
                        Width="3"
                        Background="{DynamicResource Brush.BorderSubtle}">
                  <Border.Transitions>
                    <Transitions>
                      <BrushTransition Property="Background" Duration="0:0:0.3" />
                      <DoubleTransition Property="Width" Duration="0:0:0.2" />
                    </Transitions>
                  </Border.Transitions>
                </Border>

                <DockPanel Margin="14,10,14,12">
                  <!-- Header row with chevron -->
                  <DockPanel DockPanel.Dock="Top" Margin="0,0,0,6">
                    <Border Name="PART_Chevron"
                            DockPanel.Dock="Right"
                            Width="16" Height="16"
                            VerticalAlignment="Center"
                            RenderTransformOrigin="0.5,0.5"
                            RenderTransform="rotate(0deg)">
                      <Border.Transitions>
                        <Transitions>
                          <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.24" Easing="CubicEaseOut" />
                        </Transitions>
                      </Border.Transitions>
                      <TextBlock Text="â€º"
                                 FontSize="16"
                                 Foreground="{DynamicResource Brush.TextTertiary}"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center" />
                    </Border>
                    <ContentPresenter Name="PART_HeaderPresenter"
                                      Content="{TemplateBinding Header}" />
                  </DockPanel>

                  <!-- Animated content area -->
                  <Border Name="PART_ContentHost" ClipToBounds="True">
                    <Panel>
                      <ContentPresenter Name="PART_SummaryPresenter"
                                        Content="{TemplateBinding Summary}"
                                        IsVisible="True" />
                      <ContentPresenter Name="PART_DetailPresenter"
                                        Content="{TemplateBinding Detail}"
                                        IsVisible="False" />
                    </Panel>
                  </Border>
                </DockPanel>
              </DockPanel>
            </Border>
          </ControlTemplate>
        </Setter>

        <!-- Hover -->
        <Style Selector="^:pointerover /template/ Border#PART_RootBorder">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderDefault}" />
        </Style>

        <Style Selector="^:focus-visible /template/ Border#PART_RootBorder">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.AccentDefault}" />
        </Style>

        <!-- Expanded: accent left bar and rotate chevron -->
        <Style Selector="^[IsExpanded=True] /template/ Border#PART_StratumLine">
          <Setter Property="Background" Value="{DynamicResource Brush.AccentDefault}" />
        </Style>

        <Style Selector="^[IsExpanded=True] /template/ Border#PART_Chevron">
          <Setter Property="RenderTransform" Value="rotate(90deg)" />
        </Style>
      </ControlTheme>

    </ResourceDictionary>
  </Styles.Resources>
</Styles>
