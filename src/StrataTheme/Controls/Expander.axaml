<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Styles.Resources>
    <ResourceDictionary>

      <ControlTheme x:Key="{x:Type Expander}" TargetType="Expander">
        <Setter Property="Background" Value="{DynamicResource Brush.Surface0}" />
        <Setter Property="Foreground" Value="{DynamicResource Brush.TextPrimary}" />
        <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderDefault}" />
        <Setter Property="BorderThickness" Value="{DynamicResource Stroke.Thin}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Base}" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="FontFamily" Value="{DynamicResource Font.Family}" />
        <Setter Property="FontSize" Value="{DynamicResource Font.SizeBody}" />
        <Setter Property="Template">
          <ControlTemplate>
            <Border Name="RootBorder"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{TemplateBinding CornerRadius}"
                    BoxShadow="0 0 0 0 #00000000"
                    ClipToBounds="True">
              <Border.Transitions>
                <Transitions>
                  <BrushTransition Property="Background" Duration="0:0:0.15" />
                  <BrushTransition Property="BorderBrush" Duration="0:0:0.2" />
                  <CornerRadiusTransition Property="CornerRadius" Duration="0:0:0.2" />
                  <BoxShadowsTransition Property="BoxShadow" Duration="0:0:0.2" />
                </Transitions>
              </Border.Transitions>
              <DockPanel>
                <ToggleButton Name="PART_toggle"
                              DockPanel.Dock="Top"
                              IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
                              HorizontalAlignment="Stretch"
                              HorizontalContentAlignment="Stretch"
                              Background="Transparent"
                              BorderThickness="0"
                              Padding="0"
                              Foreground="{TemplateBinding Foreground}"
                              Cursor="Hand">
                  <Grid ColumnDefinitions="Auto,*,Auto"
                        Margin="12,10,12,10">
                    <Border Name="HeaderMarker"
                            Grid.Column="0"
                            Width="2"
                            Height="14"
                            Margin="0,0,8,0"
                            CornerRadius="1"
                            Background="{DynamicResource Brush.StratumLine}"
                            Opacity="0"
                            VerticalAlignment="Center">
                      <Border.Transitions>
                        <Transitions>
                          <DoubleTransition Property="Opacity" Duration="0:0:0.12" />
                        </Transitions>
                      </Border.Transitions>
                    </Border>

                    <ContentPresenter Name="HeaderPresenter"
                                      Grid.Column="1"
                                      Content="{TemplateBinding Header}"
                                      ContentTemplate="{TemplateBinding HeaderTemplate}"
                                      VerticalAlignment="Center" />

                    <Grid Grid.Column="2"
                          Margin="8,0,0,0"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center">
                      <Path Name="ExpanderArrowDown"
                            Data="M2,2 L6,6 L10,2"
                            Stroke="{DynamicResource Brush.TextTertiary}"
                            StrokeThickness="1.5"
                            StrokeLineCap="Round"
                            StrokeJoin="Round"
                            Fill="{x:Null}"
                            Width="10"
                            Height="6"
                            Stretch="Fill"
                            Opacity="1">
                        <Path.Transitions>
                          <Transitions>
                            <DoubleTransition Property="Opacity" Duration="0:0:0.12" Easing="CubicEaseOut" />
                            <BrushTransition Property="Stroke" Duration="0:0:0.12" />
                          </Transitions>
                        </Path.Transitions>
                      </Path>
                      <Path Name="ExpanderArrowUp"
                            Data="M2,6 L6,2 L10,6"
                            Stroke="{DynamicResource Brush.TextTertiary}"
                            StrokeThickness="1.5"
                            StrokeLineCap="Round"
                            StrokeJoin="Round"
                            Fill="{x:Null}"
                            Width="10"
                            Height="6"
                            Stretch="Fill"
                            Opacity="0">
                        <Path.Transitions>
                          <Transitions>
                            <DoubleTransition Property="Opacity" Duration="0:0:0.12" Easing="CubicEaseOut" />
                            <BrushTransition Property="Stroke" Duration="0:0:0.12" />
                          </Transitions>
                        </Path.Transitions>
                      </Path>
                    </Grid>
                  </Grid>
                  <ToggleButton.Template>
                    <ControlTemplate>
                      <Border Name="HeaderSurface"
                              Background="{TemplateBinding Background}"
                              CornerRadius="{DynamicResource Radius.Base}">
                        <Border.Transitions>
                          <Transitions>
                            <BrushTransition Property="Background" Duration="0:0:0.12" />
                          </Transitions>
                        </Border.Transitions>
                        <ContentPresenter Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}"
                                          HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalContentAlignment="Center" />
                      </Border>
                    </ControlTemplate>
                  </ToggleButton.Template>
                </ToggleButton>

                <Border Name="ExpanderSeparator"
                        DockPanel.Dock="Top"
                    Height="1"
                    Background="{DynamicResource Brush.BorderSubtle}"
                        Margin="12,0"
                        Opacity="0"
                        RenderTransformOrigin="0.5,0.5"
                        RenderTransform="scaleX(0.9)">
                  <Border.Transitions>
                    <Transitions>
                      <DoubleTransition Property="Opacity" Duration="0:0:0.16" />
                      <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2" Easing="CubicEaseOut" />
                    </Transitions>
                  </Border.Transitions>
                </Border>

                <!-- Content with slide + fade  -->
                <Border Name="ExpanderContent"
                        Background="Transparent"
                        Opacity="0"
                        MaxHeight="0"
                        IsHitTestVisible="False"
                        ClipToBounds="True"
                        RenderTransformOrigin="0.5,0"
                        RenderTransform="scaleY(0.94) translateY(-6px)"
                        Padding="12,10,12,12">
                  <Border.Transitions>
                    <Transitions>
                      <DoubleTransition Property="MaxHeight" Duration="0:0:0.32" Easing="0.2,0 0,1" />
                      <DoubleTransition Property="Opacity" Duration="0:0:0.2" Easing="CubicEaseOut" />
                      <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.24" Easing="0.2,0 0,1" />
                    </Transitions>
                  </Border.Transitions>
                  <Border BorderBrush="{DynamicResource Brush.BorderSubtle}"
                          BorderThickness="0,1,0,0"
                          Padding="0,10,0,0">
                    <ContentPresenter Name="PART_ContentPresenter"
                                      Content="{TemplateBinding Content}"
                                      ContentTemplate="{TemplateBinding ContentTemplate}" />
                  </Border>
                </Border>
              </DockPanel>
            </Border>
          </ControlTemplate>
        </Setter>

        <Style Selector="^:pointerover /template/ ToggleButton#PART_toggle">
          <Setter Property="Background" Value="{DynamicResource Brush.AccentSubtle}" />
        </Style>
        <Style Selector="^ /template/ ToggleButton#PART_toggle:checked">
          <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="^:pointerover /template/ Path#ExpanderArrowDown">
          <Setter Property="Stroke" Value="{DynamicResource Brush.TextSecondary}" />
        </Style>
        <Style Selector="^:pointerover /template/ Path#ExpanderArrowUp">
          <Setter Property="Stroke" Value="{DynamicResource Brush.TextSecondary}" />
        </Style>
        <Style Selector="^:pointerover /template/ ContentPresenter#HeaderPresenter">
          <Setter Property="Opacity" Value="0.96" />
        </Style>

        <Style Selector="^:expanded /template/ Path#ExpanderArrowDown">
          <Setter Property="Opacity" Value="0" />
          <Setter Property="Stroke" Value="{DynamicResource Brush.AccentDefault}" />
        </Style>
        <Style Selector="^:expanded /template/ Path#ExpanderArrowUp">
          <Setter Property="Opacity" Value="1" />
          <Setter Property="Stroke" Value="{DynamicResource Brush.AccentDefault}" />
        </Style>
        <Style Selector="^:expanded /template/ Border#HeaderMarker">
          <Setter Property="Opacity" Value="1" />
          <Style.Animations>
            <Animation Duration="0:0:1.8" IterationCount="Infinite">
              <KeyFrame Cue="0%">
                <Setter Property="Opacity" Value="0.7" />
              </KeyFrame>
              <KeyFrame Cue="50%">
                <Setter Property="Opacity" Value="1" />
              </KeyFrame>
              <KeyFrame Cue="100%">
                <Setter Property="Opacity" Value="0.7" />
              </KeyFrame>
            </Animation>
          </Style.Animations>
        </Style>
        <Style Selector="^:expanded /template/ Border#ExpanderSeparator">
          <Setter Property="Opacity" Value="1" />
          <Setter Property="RenderTransform" Value="scaleX(1)" />
        </Style>
        <Style Selector="^:expanded /template/ Border#ExpanderContent">
          <Setter Property="IsHitTestVisible" Value="True" />
          <Setter Property="MaxHeight" Value="1200" />
          <Setter Property="Opacity" Value="1" />
          <Setter Property="RenderTransform" Value="scaleY(1) translateY(0px)" />
        </Style>
        <Style Selector="^:not(:expanded) /template/ Border#ExpanderContent">
          <Setter Property="IsHitTestVisible" Value="False" />
          <Setter Property="MaxHeight" Value="0" />
          <Setter Property="Opacity" Value="0" />
          <Setter Property="RenderTransform" Value="scaleY(0.94) translateY(-6px)" />
        </Style>
        <Style Selector="^:expanded:pointerover /template/ ToggleButton#PART_toggle">
          <Setter Property="Background" Value="{DynamicResource Brush.AccentSubtleHover}" />
        </Style>
        <Style Selector="^:expanded /template/ Border#RootBorder">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderStrong}" />
          <Setter Property="BoxShadow" Value="0 0 0 1 #124F46E5" />
        </Style>
        <Style Selector="^:pointerover /template/ Border#RootBorder">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderStrong}" />
          <Setter Property="BoxShadow" Value="0 2 8 0 #0D000000" />
        </Style>

        <Style Selector="^:disabled">
          <Setter Property="Opacity" Value="0.5" />
        </Style>
      </ControlTheme>

    </ResourceDictionary>
  </Styles.Resources>
</Styles>
