<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Styles.Resources>
    <ResourceDictionary>

      <ControlTheme x:Key="{x:Type TextBox}" TargetType="TextBox">
        <Setter Property="Background" Value="{DynamicResource Brush.ControlDefault}" />
        <Setter Property="Foreground" Value="{DynamicResource Brush.TextPrimary}" />
        <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderDefault}" />
        <Setter Property="BorderThickness" Value="{DynamicResource Stroke.Thin}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Base}" />
        <Setter Property="Padding" Value="{DynamicResource Padding.Control}" />
        <Setter Property="MinHeight" Value="{DynamicResource Size.ControlHeightM}" />
        <Setter Property="FontFamily" Value="{DynamicResource Font.Family}" />
        <Setter Property="FontSize" Value="{DynamicResource Font.SizeBody}" />
        <Setter Property="SelectionBrush" Value="{DynamicResource Brush.AccentSubtle}" />
        <Setter Property="SelectionForegroundBrush" Value="{DynamicResource Brush.TextPrimary}" />
        <Setter Property="CaretBrush" Value="{DynamicResource Brush.TextPrimary}" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template">
          <ControlTemplate>
            <Panel>
              <Border Name="PART_Border"
                      Background="{TemplateBinding Background}"
                      BorderBrush="{TemplateBinding BorderBrush}"
                      BorderThickness="{TemplateBinding BorderThickness}"
                      CornerRadius="{TemplateBinding CornerRadius}"
                      MinHeight="{TemplateBinding MinHeight}">
                <Border.Transitions>
                  <Transitions>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.15" />
                    <BrushTransition Property="Background" Duration="0:0:0.1" />
                    <BoxShadowsTransition Property="BoxShadow" Duration="0:0:0.2" />
                  </Transitions>
                </Border.Transitions>
                <DockPanel>
                  <TextBlock Name="PART_FloatingWatermark"
                             DockPanel.Dock="Top"
                             IsVisible="False"
                             FontSize="{DynamicResource Font.SizeCaption}"
                             Foreground="{DynamicResource Brush.TextTertiary}"
                             Margin="12,4,12,0" />
                  <DataValidationErrors>
                    <DockPanel>
                      <ContentPresenter DockPanel.Dock="Left"
                                        Content="{TemplateBinding InnerLeftContent}"
                                        IsVisible="{TemplateBinding InnerLeftContent, Converter={x:Static ObjectConverters.IsNotNull}}"
                                        VerticalAlignment="Center" />
                      <ContentPresenter DockPanel.Dock="Right"
                                        Content="{TemplateBinding InnerRightContent}"
                                        IsVisible="{TemplateBinding InnerRightContent, Converter={x:Static ObjectConverters.IsNotNull}}"
                                        VerticalAlignment="Center" />
                      <Panel>
                        <TextBlock Name="PART_Watermark"
                                   Text="{TemplateBinding Watermark}"
                                   Foreground="{DynamicResource Brush.TextTertiary}"
                                   IsVisible="{TemplateBinding Text, Converter={x:Static StringConverters.IsNullOrEmpty}}"
                                   IsHitTestVisible="False"
                                   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                   Margin="{TemplateBinding Padding}" />
                        <ScrollViewer HorizontalScrollBarVisibility="{TemplateBinding (ScrollViewer.HorizontalScrollBarVisibility)}"
                                      VerticalScrollBarVisibility="{TemplateBinding (ScrollViewer.VerticalScrollBarVisibility)}">
                          <TextPresenter Name="PART_TextPresenter"
                                         Text="{TemplateBinding Text, Mode=TwoWay}"
                                         CaretBrush="{TemplateBinding CaretBrush}"
                                         CaretIndex="{TemplateBinding CaretIndex}"
                                         SelectionStart="{TemplateBinding SelectionStart}"
                                         SelectionEnd="{TemplateBinding SelectionEnd}"
                                         SelectionBrush="{TemplateBinding SelectionBrush}"
                                         SelectionForegroundBrush="{TemplateBinding SelectionForegroundBrush}"
                                         TextAlignment="{TemplateBinding TextAlignment}"
                                         TextWrapping="{TemplateBinding TextWrapping}"
                                         PasswordChar="{TemplateBinding PasswordChar}"
                                         RevealPassword="{TemplateBinding RevealPassword}"
                                         LetterSpacing="{TemplateBinding LetterSpacing}"
                                         LineHeight="{TemplateBinding LineHeight}"
                                         Margin="{TemplateBinding Padding}"
                                         VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                         HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                        </ScrollViewer>
                      </Panel>
                    </DockPanel>
                  </DataValidationErrors>
                </DockPanel>
              </Border>
              <!-- Bottom accent bar â€” scales from center on focus -->
              <Border Name="FocusAccentBar"
                      Height="2"
                      CornerRadius="0,0,6,6"
                      Background="{DynamicResource Brush.StratumLine}"
                      VerticalAlignment="Bottom"
                      HorizontalAlignment="Stretch"
                      Margin="4,0"
                      Opacity="0"
                      IsHitTestVisible="False"
                      RenderTransformOrigin="0.5,0.5"
                      RenderTransform="scaleX(0)">
                <Border.Transitions>
                  <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.15" />
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.3" Easing="0.2,0 0,1" />
                  </Transitions>
                </Border.Transitions>
              </Border>
            </Panel>
          </ControlTemplate>
        </Setter>

        <Style Selector="^:pointerover /template/ Border#PART_Border">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderStrong}" />
        </Style>
        <Style Selector="^:focus-within /template/ Border#PART_Border">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderFocus}" />
          <Setter Property="BorderThickness" Value="1,1,1,2" />
          <Setter Property="BoxShadow" Value="0 0 0 2 #1A4F46E5" />
        </Style>
        <Style Selector="^:focus-within /template/ Border#FocusAccentBar">
          <Setter Property="Opacity" Value="1" />
          <Setter Property="RenderTransform" Value="scaleX(1)" />
          <Style.Animations>
            <Animation Duration="0:0:1.6" IterationCount="Infinite">
              <KeyFrame Cue="0%">
                <Setter Property="Opacity" Value="0.72" />
              </KeyFrame>
              <KeyFrame Cue="50%">
                <Setter Property="Opacity" Value="1" />
              </KeyFrame>
              <KeyFrame Cue="100%">
                <Setter Property="Opacity" Value="0.72" />
              </KeyFrame>
            </Animation>
          </Style.Animations>
        </Style>
        <Style Selector="^:disabled">
          <Setter Property="Opacity" Value="0.5" />
        </Style>
        <Style Selector="^:error /template/ Border#PART_Border">
          <Setter Property="BorderBrush" Value="{DynamicResource Brush.BorderError}" />
        </Style>
      </ControlTheme>

    </ResourceDictionary>
  </Styles.Resources>
</Styles>
